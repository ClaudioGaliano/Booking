@model Booking.Models.RicercaCamere

@{
    // Recupera i valori dei cookie
    var dataInizio = Request.Cookies["DataInizio"]?.Value;
    var dataFine = Request.Cookies["DataFine"]?.Value;
    var destinazione = Request.Cookies["Destinazione"]?.Value;

    // Converte i valori dei cookie in DateTime se non sono null
    DateTime? dataInizioDate = string.IsNullOrEmpty(dataInizio) ? (DateTime?)null : DateTime.Parse(dataInizio);
    DateTime? dataFineDate = string.IsNullOrEmpty(dataFine) ? (DateTime?)null : DateTime.Parse(dataFine);
}


@using (Html.BeginForm("RicercaCamere", "Camere", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal search">
        <h4>RicercaCamere</h4>

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.Citta, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Citta, new { htmlAttributes = new { @class = "form-control", Value = destinazione } })
                @Html.ValidationMessageFor(model => model.Citta, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <label for="DataInizio" class="label-form">@Html.Raw("<strong>Data inizio</strong>")</label>
            @Html.TextBoxFor(model => model.DataInizio, "{0:yyyy-MM-dd}", new { type = "date", Value = dataInizioDate?.ToString("yyyy-MM-dd") })
            @Html.ValidationMessageFor(model => model.DataInizio, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            <label for="DataFine" class="label-form">@Html.Raw("<strong>Data fine</strong>")</label>
            @Html.TextBoxFor(model => model.DataFine, "{0:yyyy-MM-dd}", new { type = "date", Value = dataFineDate?.ToString("yyyy-MM-dd") })
            @Html.ValidationMessageFor(model => model.DataFine, "", new { @class = "text-danger" })
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Cerca" class="btn btn-primary" />
            </div>
        </div>
    </div>
}

